{"ast":null,"code":"var _jsxFileName = \"/Users/joshisj/IdeaProjects/secondary/src/authbuttonnew.js\";\nimport React, { useEffect, useState } from 'react';\nimport Amplify, { Auth, Hub } from 'aws-amplify'; //import awsconfig from '../config/awsconfig';\n\nimport RequestForm from \"./saRequestForm\";\nimport './App'; //Amplify.configure(awsconfig);\n\nfunction AuthButton() {\n  const [user, setUser] = useState(null);\n  const [creds, setCreds] = useState(null);\n  useEffect(() => {\n    Hub.listen('auth', ({\n      payload: {\n        event,\n        data\n      }\n    }) => {\n      console.log(\"Received Event\");\n      console.log(event);\n\n      switch (event) {\n        case 'signIn':\n          console.log('signIn event detected');\n          console.log(data);\n          break;\n\n        case 'cognitoHostedUI':\n          console.log('cognitoHostedUI event detected');\n          console.log(data);\n          getUser().then(userData => setUser(userData));\n          break;\n\n        case 'signOut':\n          setUser(null);\n          break;\n\n        case 'signIn_failure':\n          console.log(\"Normal sign in failure\");\n          break;\n\n        case 'cognitoHostedUI_failure':\n          console.log('Sign in failure', data);\n          break;\n\n        default:\n          console.log('No matching cases in auth flow');\n          break;\n      }\n    });\n    getUser().then(userData => setUser(userData));\n  }, []);\n\n  function getUser() {\n    return Auth.currentAuthenticatedUser().then(userData => {\n      console.log('User Data:', userData); // For some reason the identities key, which contains the\n      // username is a string, not an object, so we're going to\n      // fix that when the user is retrieved\n\n      const identities = JSON.parse(userData.attributes.identities);\n      console.log(identities);\n      userData.attributes.identitiesList = identities;\n      return userData;\n    }).catch(() => console.log('Not signed in'));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, user ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(RequestForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    class: \"siginpage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"signintitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, \"Solutions Architect Activity Request\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sigin\",\n    onClick: () => Auth.federatedSignIn(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, \"Sign In with Midway\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"Please give the form a couple seconds to load after signing in\")));\n}\n\nexport default AuthButton; //sign out button\n//<button className='sigin' onClick={() => Auth.signOut()}>Sign Out</button>","map":{"version":3,"sources":["/Users/joshisj/IdeaProjects/secondary/src/authbuttonnew.js"],"names":["React","useEffect","useState","Amplify","Auth","Hub","RequestForm","AuthButton","user","setUser","creds","setCreds","listen","payload","event","data","console","log","getUser","then","userData","currentAuthenticatedUser","identities","JSON","parse","attributes","identitiesList","catch","federatedSignIn"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Amplify, { Auth, Hub } from 'aws-amplify';\n//import awsconfig from '../config/awsconfig';\nimport RequestForm from \"./saRequestForm\";\nimport './App'\n//Amplify.configure(awsconfig);\n\nfunction AuthButton() {\n    const [user, setUser] = useState(null);\n    const [creds, setCreds] = useState(null)\n\n    useEffect(() => {\n        Hub.listen('auth', ({ payload: { event, data } }) => {\n            console.log(\"Received Event\")\n            console.log(event)\n            switch (event) {\n                case 'signIn':\n                    console.log('signIn event detected')\n                    console.log(data);\n                    break\n                case 'cognitoHostedUI':\n                    console.log('cognitoHostedUI event detected')\n                    console.log(data)\n                    getUser().then(userData => setUser(userData));\n                    break;\n                case 'signOut':\n                    setUser(null);\n                    break;\n                case 'signIn_failure':\n                    console.log(\"Normal sign in failure\")\n                    break\n                case 'cognitoHostedUI_failure':\n                    console.log('Sign in failure', data);\n                    break;\n                default:\n                    console.log('No matching cases in auth flow')\n                    break\n            }\n        });\n\n        getUser().then(userData => setUser(userData));\n    }, []);\n\n    function getUser() {\n        return Auth.currentAuthenticatedUser()\n            .then(userData => {\n                console.log('User Data:',userData)\n                // For some reason the identities key, which contains the\n                // username is a string, not an object, so we're going to\n                // fix that when the user is retrieved\n                const identities = JSON.parse(userData.attributes.identities)\n                console.log(identities)\n                userData.attributes.identitiesList = identities\n                return userData\n            })\n            .catch(() => console.log('Not signed in'));\n    }\n\n    return (\n        <div>\n            {user ? (\n                <div >\n                    <RequestForm/>\n                </div>\n            ) : (\n                <div class='siginpage'>\n                    <h1 className='signintitle'>Solutions Architect Activity Request</h1>\n                    <br></br>\n                    <br></br>\n                    <button className='sigin' onClick={() => Auth.federatedSignIn()}>Sign In with Midway</button>\n                    <p>Please give the form a couple seconds to load after signing in</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default AuthButton;\n\n//sign out button\n//<button className='sigin' onClick={() => Auth.signOut()}>Sign Out</button>"]},"metadata":{},"sourceType":"module"}